!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(A){"use strict";function i(b,c){var g,i,a,j,k,e=A("<div class=\"minicolors\" />"),l=A.minicolors.defaults;if(!b.data("minicolors-initialized")){if(c=A.extend(!0,{},l,c),e.addClass("minicolors-theme-"+c.theme).toggleClass("minicolors-with-opacity",c.opacity),void 0!==c.position&&A.each(c.position.split(" "),function(){e.addClass("minicolors-position-"+this)}),g="rgb"===c.format?c.opacity?"25":"20":c.keywords?"11":"7",b.addClass("minicolors-input").data("minicolors-initialized",!1).data("minicolors-settings",c).prop("size",g).wrap(e).after("<div class=\"minicolors-panel minicolors-slider-"+c.control+"\"><div class=\"minicolors-slider minicolors-sprite\"><div class=\"minicolors-picker\"></div></div><div class=\"minicolors-opacity-slider minicolors-sprite\"><div class=\"minicolors-picker\"></div></div><div class=\"minicolors-grid minicolors-sprite\"><div class=\"minicolors-grid-inner\"></div><div class=\"minicolors-picker\"><div></div></div></div></div>"),c.inline||(b.after("<span class=\"minicolors-swatch minicolors-sprite minicolors-input-swatch\"><span class=\"minicolors-swatch-color\"></span></span>"),b.next(".minicolors-input-swatch").on("click",function(a){a.preventDefault(),b.focus()})),j=b.parent().find(".minicolors-panel"),j.on("selectstart",function(){return!1}).end(),c.swatches&&0!==c.swatches.length)for(j.addClass("minicolors-with-swatches"),i=A("<ul class=\"minicolors-swatches\"></ul>").appendTo(j),k=0;k<c.swatches.length;++k)a=c.swatches[k],a=f(a)?u(a,!0):w(p(a,!0)),A("<li class=\"minicolors-swatch minicolors-sprite\"><span class=\"minicolors-swatch-color\"></span></li>").appendTo(i).data("swatch-color",c.swatches[k]).find(".minicolors-swatch-color").css({backgroundColor:d(a),opacity:a.a}),c.swatches[k]=a;c.inline&&b.parent().addClass("minicolors-inline"),D(b,!1),b.data("minicolors-initialized",!0)}}function j(a){var b=a.parent();a.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input"),b.before(a).remove()}function q(a){var b=a.parent(),c=b.find(".minicolors-panel"),d=a.data("minicolors-settings");!a.data("minicolors-initialized")||a.prop("disabled")||b.hasClass("minicolors-inline")||b.hasClass("minicolors-focus")||(z(),b.addClass("minicolors-focus"),c.stop(!0,!0).fadeIn(d.showSpeed,function(){d.show&&d.show.call(a.get(0))}))}function z(){A(".minicolors-focus").each(function(){var b=A(this),c=b.find(".minicolors-input"),d=b.find(".minicolors-panel"),e=c.data("minicolors-settings");d.fadeOut(e.hideSpeed,function(){e.hide&&e.hide.call(c.get(0)),b.removeClass("minicolors-focus")})})}function a(b,f,i){var j,k,a,o,e=b.parents(".minicolors").find(".minicolors-input"),c=e.data("minicolors-settings"),l=b.find("[class$=-picker]"),h=b.offset().left,d=b.offset().top,p=F(f.pageX-h),q=F(f.pageY-d),g=i?c.animationSpeed:0;f.originalEvent.changedTouches&&(p=f.originalEvent.changedTouches[0].pageX-h,q=f.originalEvent.changedTouches[0].pageY-d),0>p&&(p=0),0>q&&(q=0),p>b.width()&&(p=b.width()),q>b.height()&&(q=b.height()),b.parent().is(".minicolors-slider-wheel")&&l.parent().is(".minicolors-grid")&&(j=75-p,k=75-q,a=C(j*j+k*k),o=x(k,j),0>o&&(o+=2*K),75<a&&(a=75,p=75-75*J(o),q=75-75*H(o)),p=F(p),q=F(q)),b.is(".minicolors-grid")?l.stop(!0).animate({top:q+"px",left:p+"px"},g,c.animationEasing,function(){n(e,b)}):l.stop(!0).animate({top:q+"px"},g,c.animationEasing,function(){n(e,b)})}function n(e,f){function i(a,b){var c,d;return a.length&&b?(c=a.offset().left,d=a.offset().top,{x:c-b.offset().left+a.outerWidth()/2,y:d-b.offset().top+a.outerHeight()/2}):null}var j,k,l,o,q,c,h,d=Math.floor,t=e.val(),A=e.attr("data-opacity"),D=e.parent(),g=e.data("minicolors-settings"),m=D.find(".minicolors-input-swatch"),v=D.find(".minicolors-grid"),b=D.find(".minicolors-slider"),w=D.find(".minicolors-opacity-slider"),F=v.find("[class$=-picker]"),L=b.find("[class$=-picker]"),M=w.find("[class$=-picker]"),N=i(F,v),I=i(L,b),O=i(M,w);if(f.is(".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider")){switch(g.control){case"wheel":o=v.width()/2-N.x,q=v.height()/2-N.y,c=C(o*o+q*q),h=x(q,o),0>h&&(h+=2*K),75<c&&(c=75,N.x=69-75*J(h),N.y=69-75*H(h)),k=G(c/.75,0,100),j=G(180*h/K,0,360),l=G(100-d(I.y*(100/b.height())),0,100),t=y({h:j,s:k,b:l}),b.css("backgroundColor",y({h:j,s:k,b:100}));break;case"saturation":j=G(parseInt(N.x*(360/v.width()),10),0,360),k=G(100-d(I.y*(100/b.height())),0,100),l=G(100-d(N.y*(100/v.height())),0,100),t=y({h:j,s:k,b:l}),b.css("backgroundColor",y({h:j,s:100,b:l})),D.find(".minicolors-grid-inner").css("opacity",k/100);break;case"brightness":j=G(parseInt(N.x*(360/v.width()),10),0,360),k=G(100-d(N.y*(100/v.height())),0,100),l=G(100-d(I.y*(100/b.height())),0,100),t=y({h:j,s:k,b:l}),b.css("backgroundColor",y({h:j,s:k,b:100})),D.find(".minicolors-grid-inner").css("opacity",1-l/100);break;default:j=G(360-parseInt(I.y*(360/b.height()),10),0,360),k=G(d(N.x*(100/v.width())),0,100),l=G(100-d(N.y*(100/v.height())),0,100),t=y({h:j,s:k,b:l}),v.css("backgroundColor",y({h:j,s:100,b:100}));}A=g.opacity?parseFloat(1-O.y/w.height()).toFixed(2):1,B(e,t,A)}else m.find("span").css({backgroundColor:t,opacity:A}),E(e,t,A)}function B(b,c,d){var e,g=b.parent(),a=b.data("minicolors-settings"),h=g.find(".minicolors-input-swatch");a.opacity&&b.attr("data-opacity",d),"rgb"===a.format?(e=f(c)?u(c,!0):w(p(c,!0)),d=""===b.attr("data-opacity")?1:G(parseFloat(b.attr("data-opacity")).toFixed(2),0,1),!isNaN(d)&&a.opacity||(d=1),c=1>=b.minicolors("rgbObject").a&&e&&a.opacity?"rgba("+e.r+", "+e.g+", "+e.b+", "+parseFloat(d)+")":"rgb("+e.r+", "+e.g+", "+e.b+")"):(f(c)&&(c=v(c)),c=l(c,a.letterCase)),b.val(c),h.find("span").css({backgroundColor:c,opacity:d}),E(b,c,d)}function D(b,i){var o,s,a,n,r,e,t,h,d,w,B=Math.ceil,C=b.parent(),x=b.data("minicolors-settings"),I=C.find(".minicolors-input-swatch"),L=C.find(".minicolors-grid"),z=C.find(".minicolors-slider"),F=C.find(".minicolors-opacity-slider"),M=L.find("[class$=-picker]"),D=z.find("[class$=-picker]"),j=F.find("[class$=-picker]");switch(f(b.val())?(o=v(b.val()),r=G(parseFloat(m(b.val())).toFixed(2),0,1),r&&b.attr("data-opacity",r)):o=l(p(b.val(),!0),x.letterCase),o||(o=l(g(x.defaultValue,!0),x.letterCase)),s=k(o),n=x.keywords?A.map(x.keywords.split(","),function(a){return A.trim(a.toLowerCase())}):[],e=""!==b.val()&&-1<A.inArray(b.val().toLowerCase(),n)?l(b.val()):f(b.val())?u(b.val()):o,i||b.val(e),x.opacity&&(a=""===b.attr("data-opacity")?1:G(parseFloat(b.attr("data-opacity")).toFixed(2),0,1),isNaN(a)&&(a=1),b.attr("data-opacity",a),I.find("span").css("opacity",a),h=G(F.height()-F.height()*a,0,F.height()),j.css("top",h+"px")),"transparent"===b.val().toLowerCase()&&I.find("span").css("opacity",0),I.find("span").css("backgroundColor",o),x.control){case"wheel":d=G(B(.75*s.s),0,L.height()/2),w=s.h*K/180,t=G(75-J(w)*d,0,L.width()),h=G(75-H(w)*d,0,L.height()),M.css({top:h+"px",left:t+"px"}),h=150-s.b/(100/L.height()),""===o&&(h=0),D.css("top",h+"px"),z.css("backgroundColor",y({h:s.h,s:s.s,b:100}));break;case"saturation":t=G(5*s.h/12,0,150),h=G(L.height()-B(s.b/(100/L.height())),0,L.height()),M.css({top:h+"px",left:t+"px"}),h=G(z.height()-s.s*(z.height()/100),0,z.height()),D.css("top",h+"px"),z.css("backgroundColor",y({h:s.h,s:100,b:s.b})),C.find(".minicolors-grid-inner").css("opacity",s.s/100);break;case"brightness":t=G(5*s.h/12,0,150),h=G(L.height()-B(s.s/(100/L.height())),0,L.height()),M.css({top:h+"px",left:t+"px"}),h=G(z.height()-s.b*(z.height()/100),0,z.height()),D.css("top",h+"px"),z.css("backgroundColor",y({h:s.h,s:s.s,b:100})),C.find(".minicolors-grid-inner").css("opacity",1-s.b/100);break;default:t=G(B(s.s/(100/L.width())),0,L.width()),h=G(L.height()-B(s.b/(100/L.height())),0,L.height()),M.css({top:h+"px",left:t+"px"}),h=G(z.height()-s.h/(360/z.height()),0,z.height()),D.css("top",h+"px"),L.css("backgroundColor",y({h:s.h,s:100,b:100}));}b.data("minicolors-initialized")&&E(b,e,a)}function E(b,c,d){var g,h,a,i=b.data("minicolors-settings"),j=b.data("minicolors-lastChange");if(!j||j.value!==c||j.opacity!==d){if(b.data("minicolors-lastChange",{value:c,opacity:d}),i.swatches&&0!==i.swatches.length){for(g=f(c)?u(c,!0):w(c),h=-1,a=0;a<i.swatches.length;++a)if(g.r===i.swatches[a].r&&g.g===i.swatches[a].g&&g.b===i.swatches[a].b&&g.a===i.swatches[a].a){h=a;break}b.parent().find(".minicolors-swatches .minicolors-swatch").removeClass("selected"),-1!==h&&b.parent().find(".minicolors-swatches .minicolors-swatch").eq(a).addClass("selected")}i.change&&(i.changeDelay?(clearTimeout(b.data("minicolors-changeTimeout")),b.data("minicolors-changeTimeout",setTimeout(function(){i.change.call(b.get(0),c,d)},i.changeDelay))):i.change.call(b.get(0),c,d)),b.trigger("change").trigger("input")}}function c(b){var c,d=A(b).attr("data-opacity");if(f(A(b).val()))c=u(A(b).val(),!0);else{var e=p(A(b).val(),!0);c=w(e)}return c?(void 0!==d&&A.extend(c,{a:parseFloat(d)}),c):null}function e(b,c){var d,e=A(b).attr("data-opacity");if(f(A(b).val()))d=u(A(b).val(),!0);else{var a=p(A(b).val(),!0);d=w(a)}return d?(void 0===e&&(e=1),c?"rgba("+d.r+", "+d.g+", "+d.b+", "+parseFloat(e)+")":"rgb("+d.r+", "+d.g+", "+d.b+")"):null}function l(a,b){return"uppercase"===b?a.toUpperCase():a.toLowerCase()}function p(a,b){return a=a.replace(/^#/g,""),a.match(/^[A-F0-9]{3,6}/gi)?3!==a.length&&6!==a.length?"":(3===a.length&&b&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),"#"+a):""}function u(a,b){var c=a.replace(/[^\d,.]/g,""),d=c.split(",");return d[0]=G(parseInt(d[0],10),0,255),d[1]=G(parseInt(d[1],10),0,255),d[2]=G(parseInt(d[2],10),0,255),d[3]&&(d[3]=G(parseFloat(d[3],10),0,1)),b?d[3]?{r:d[0],g:d[1],b:d[2],a:d[3]}:{r:d[0],g:d[1],b:d[2]}:"undefined"!=typeof d[3]&&1>=d[3]?"rgba("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+")":"rgb("+d[0]+", "+d[1]+", "+d[2]+")"}function g(a,b){return f(a)?u(a):p(a,b)}function G(a,b,c){return a<b&&(a=b),a>c&&(a=c),a}function f(a){var b=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return b&&4===b.length}function m(a){return a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d{1,2})?|\.\d{1,2})[\s+]?/i),a&&6===a.length?a[4]:"1"}function b(b){var c={},d=F(b.h),f=F(255*b.s/100),g=F(255*b.b/100);if(0===f)c.r=c.g=c.b=g;else{var a=g,h=(255-f)*g/255,i=(a-h)*(d%60)/60;360===d&&(d=0),60>d?(c.r=a,c.b=h,c.g=h+i):120>d?(c.g=a,c.b=h,c.r=a-i):180>d?(c.g=a,c.r=h,c.b=h+i):240>d?(c.b=a,c.r=h,c.g=a-i):300>d?(c.b=a,c.g=h,c.r=h+i):360>d?(c.r=a,c.g=h,c.b=a-i):(c.r=0,c.g=0,c.b=0)}return{r:F(c.r),g:F(c.g),b:F(c.b)}}function v(a){return a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),a&&4===a.length?"#"+("0"+parseInt(a[1],10).toString(16)).slice(-2)+("0"+parseInt(a[2],10).toString(16)).slice(-2)+("0"+parseInt(a[3],10).toString(16)).slice(-2):""}function d(a){var b=[a.r.toString(16),a.g.toString(16),a.b.toString(16)];return A.each(b,function(a,c){1===c.length&&(b[a]="0"+c)}),"#"+b.join("")}function y(a){return d(b(a))}function k(a){var b=h(w(a));return 0===b.s&&(b.h=360),b}function h(b){var c={h:0,s:0,b:0},d=Math.min(b.r,b.g,b.b),e=Math.max(b.r,b.g,b.b),f=e-d;return c.b=e,c.s=0===e?0:255*f/e,c.h=0===c.s?-1:b.r===e?(b.g-b.b)/f:b.g===e?2+(b.b-b.r)/f:4+(b.r-b.g)/f,c.h*=60,0>c.h&&(c.h+=360),c.s*=100/255,c.b*=100/255,c}function w(a){return a=parseInt(-1<a.indexOf("#")?a.substring(1):a,16),{r:a>>16,g:(65280&a)>>8,b:255&a}}var H=Math.sin,J=Math.cos,K=Math.PI,x=Math.atan2,C=Math.sqrt,F=Math.round;A.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",defaultValue:"",format:"hex",hide:null,hideSpeed:100,inline:!1,keywords:"",letterCase:"lowercase",opacity:!1,position:"bottom left",show:null,showSpeed:100,theme:"default",swatches:[]}},A.extend(A.fn,{minicolors:function(a,b){return"destroy"===a?(A(this).each(function(){j(A(this))}),A(this)):"hide"===a?(z(),A(this)):"opacity"===a?void 0===b?A(this).attr("data-opacity"):(A(this).each(function(){D(A(this).attr("data-opacity",b))}),A(this)):"rgbObject"===a?c(A(this),"rgbaObject"===a):"rgbString"===a||"rgbaString"===a?e(A(this),"rgbaString"===a):"settings"===a?void 0===b?A(this).data("minicolors-settings"):(A(this).each(function(){var a=A(this).data("minicolors-settings")||{};j(A(this)),A(this).minicolors(A.extend(!0,a,b))}),A(this)):"show"===a?(q(A(this).eq(0)),A(this)):"value"===a?void 0===b?A(this).val():(A(this).each(function(){"object"==typeof b&&null!==b?(b.opacity&&A(this).attr("data-opacity",G(b.opacity,0,1)),b.color&&A(this).val(b.color)):A(this).val(b),D(A(this))}),A(this)):("create"!==a&&(b=a),A(this).each(function(){i(A(this),b)}),A(this))}}),A([document]).on("mousedown.minicolors touchstart.minicolors",function(a){A(a.target).parents().add(a.target).hasClass("minicolors")||z()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(b){var c=A(this);b.preventDefault(),A(b.delegateTarget).data("minicolors-target",c),a(c,b,!0)}).on("mousemove.minicolors touchmove.minicolors",function(b){var c=A(b.delegateTarget).data("minicolors-target");c&&a(c,b)}).on("mouseup.minicolors touchend.minicolors",function(){A(this).removeData("minicolors-target")}).on("click.minicolors",".minicolors-swatches li",function(b){b.preventDefault();var c=A(this),d=c.parents(".minicolors").find(".minicolors-input"),e=c.data("swatch-color");B(d,e,m(e)),D(d)}).on("mousedown.minicolors touchstart.minicolors",".minicolors-input-swatch",function(a){var b=A(this).parent().find(".minicolors-input");a.preventDefault(),q(b)}).on("focus.minicolors",".minicolors-input",function(){var a=A(this);a.data("minicolors-initialized")&&q(a)}).on("blur.minicolors",".minicolors-input",function(){var b,c,h,i,a,j=A(this),k=j.data("minicolors-settings");j.data("minicolors-initialized")&&(b=k.keywords?A.map(k.keywords.split(","),function(a){return A.trim(a.toLowerCase())}):[],""!==j.val()&&-1<A.inArray(j.val().toLowerCase(),b)?a=j.val():(f(j.val())?h=u(j.val(),!0):(c=p(j.val(),!0),h=c?w(c):null),a=null===h?k.defaultValue:"rgb"===k.format?u(k.opacity?"rgba("+h.r+","+h.g+","+h.b+","+j.attr("data-opacity")+")":"rgb("+h.r+","+h.g+","+h.b+")"):d(h)),i=k.opacity?j.attr("data-opacity"):1,"transparent"===a.toLowerCase()&&(i=0),j.closest(".minicolors").find(".minicolors-input-swatch > span").css("opacity",i),j.val(a),""===j.val()&&j.val(g(k.defaultValue,!0)),j.val(l(j.val(),k.letterCase)))}).on("keydown.minicolors",".minicolors-input",function(a){var b=A(this);if(b.data("minicolors-initialized"))switch(a.keyCode){case 9:z();break;case 13:case 27:z(),b.blur();}}).on("keyup.minicolors",".minicolors-input",function(){var a=A(this);a.data("minicolors-initialized")&&D(a,!0)}).on("paste.minicolors",".minicolors-input",function(){var a=A(this);a.data("minicolors-initialized")&&setTimeout(function(){D(a,!0)},1)})});